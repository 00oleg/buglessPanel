<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="style.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
		<script>
			$(document).ready(function() {
				var panel = document.querySelector('.outer');
				var panelInner = panel.querySelector('.inner');

				panel.addEventListener('touchmove', handleTouchMoveVertical, false);
				panel.addEventListener('touchstart', handleTouchStart, false);

				function stopBottom(evt) {
					if(panel.scrollTop + panel.offsetHeight >= panelInner.offsetHeight) {
						console.log('finished');
						evt.preventDefault();
						evt.stopPropagation();
						evt.returnValue = false;
						evt.stopImmediatePropagation();
						return false;
					}
				}

				function stopTop(evt) {
					if(panel.scrollTop <= 0) {
						console.log('finished');
						evt.preventDefault();
						evt.stopPropagation();
						evt.returnValue = false;
						evt.stopImmediatePropagation();
						return false;
					}
				}

				document.addEventListener('touchstart', handleTouchStart, false);
				document.addEventListener('touchmove', handleTouchMoveOrizontal, false);

				var xDown = null;
				var yDown = null;

				function handleTouchStart(evt) {
					xDown = evt.touches[0].clientX;
					yDown = evt.touches[0].clientY;
				};

				function handleTouchMoveOrizontal(evt) {
					if ( ! xDown || ! yDown ) {
						return;
					}

					var xUp = evt.touches[0].clientX;
					var yUp = evt.touches[0].clientY;

					var xDiff = xDown - xUp;
					var yDiff = yDown - yUp;

					/*most significant*/
					if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {
						if ( xDiff > 0 ) {
							/* left swipe */
							console.info('left');
							$('body, .outer').removeClass('open');
						} else {
							/* right swipe */
							console.info('right');
							$('body, .outer').addClass('open');
						}
					}

					/* reset values */
					xDown = null;
					yDown = null;
				};

				function handleTouchMoveVertical(evt) {
					if ( ! xDown || ! yDown ) {
						return;
					}

					var xUp = evt.touches[0].clientX;
					var yUp = evt.touches[0].clientY;

					var xDiff = xDown - xUp;
					var yDiff = yDown - yUp;


					if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/
						if ( xDiff > 0 ) {
							/* left swipe */
							$('body, .outer').removeClass('open');
						} else {
							/* right swipe */
							$('body, .outer').addClass('open');
						}
					} else {
						if ( yDiff > 0 ) {
							/* up swipe */
							stopBottom(evt);
						} else {
							/* down swipe */
							stopTop(evt);
						}
					}

					/* reset values */
					xDown = null;
					yDown = null;
				};
			});

		</script>

	</head>
	<body>
		<div class="outer">
			<div class="inner">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
				<img src="http://placehold.it/200x200" alt="">
			</div>
		</div>
		<div class="content">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
			<img src="http://placehold.it/300/300" alt="">
		</div>
	</body>
</html>
